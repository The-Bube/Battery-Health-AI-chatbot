<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Battery SOH Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="app-shell">
    <div class="card">
        <h1 class="app-title">Battery Health Prediction</h1>
        <p class="app-subtitle">
            Enter the pack voltages and operating conditions to estimate State of Health (SOH).
        </p>

        {% if error %}
            <div class="error">{{ error }}</div>
        {% endif %}

        {% if prediction %}
            <div class="result-box">
                <div class="result-title">Prediction</div>
                <div>SOH: <strong>{{ prediction }}</strong></div>
                <div>
                    Status:
                    {% if status == 'Healthy' %}
                        <span class="result-status-healthy">{{ status }}</span>
                    {% else %}
                        <span class="result-status-problem">{{ status }}</span>
                    {% endif %}
                </div>
            </div>
        {% endif %}

        <form method="post">
            <h2 class="section-title">Threshold & Operating Point</h2>
            <div class="form-row">
                <div>
                    <div class="label">SOH Threshold (e.g. 0.8)</div>
                    <input type="number" step="0.01" name="threshold" value="0.8">
                </div>
                <div>
                    <div class="label">SOC</div>
                    <input type="number" step="0.01" name="soc">
                </div>
                <div>
                    <div class="label">SOE</div>
                    <input type="number" step="0.01" name="soe">
                </div>
            </div>

            <h2 class="section-title">Cell Voltages (U1 â€“ U21)</h2>
            <div class="voltage-grid">
                {% for i in range(1, 22) %}
                    <div class="voltage-field">
                        <span>U{{ i }}:</span>
                        <input type="number" step="0.0001" name="U{{ i }}">
                    </div>
                {% endfor %}
            </div>

            <div class="form-actions">
                <button type="submit">Predict</button>
            </div>
        </form>

        <div class="footer-link">
            Prefer a conversational assistant? 
            <a href="{{ url_for('chatbot') }}">Open the Battery Health Chatbot</a>
        </div>
    </div>
</div>
</body>
</html>
